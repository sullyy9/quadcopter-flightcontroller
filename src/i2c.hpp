#pragma once
/**
 * -------------------------------------------------------------------------------------------------
 * @author  Ryan Sullivan (ryansullivan@googlemail.com)
 *
 * @file    i2c.h
 * @brief   Header.
 *
 * @date    2021-04-04
 * -------------------------------------------------------------------------------------------------
 */

namespace i2c {
/*------------------------------------------------------------------------------------------------*/
/*-constant-definitions---------------------------------------------------------------------------*/
/*------------------------------------------------------------------------------------------------*/

typedef enum addresses
{
    ADDRESS_ACCEL = 0b00110010,
    ADDRESS_MAG   = 0b00111100

} address_t;

typedef enum transmit_type
{
    TRANSMIT_NORMAL,
    TRANSMIT_REQUEST

} transmit_type_t;

/*------------------------------------------------------------------------------------------------*/
/*-exported-variables-----------------------------------------------------------------------------*/
/*------------------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------------------*/
/*-exported-functions-----------------------------------------------------------------------------*/
/*------------------------------------------------------------------------------------------------*/

void initialise(void);

bool transfer_in_progress(void);

void tx_buffer_write(uint8_t data);
void tx_data(address_t device, transmit_type_t type);

uint8_t rx_buffer_read(void);
void    rx_data(address_t device, uint32_t number_bytes);

void dma1_channel6_isr(void);
void dma1_channel7_isr(void);
void ev_isr(void);
void er_isr(void);

/*------------------------------------------------------------------------------------------------*/
/*-end-of-module----------------------------------------------------------------------------------*/
/*------------------------------------------------------------------------------------------------*/
}
